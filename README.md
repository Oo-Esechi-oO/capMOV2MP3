# capMOV2MP3

## ツールの機能
本ツールは，動画(MP4)ファイルを時間指定して複数出力できるファイルです．  
1本の長い動画から短い動画を複数，時間指定して切り出すことができます．


具体的には以下の順で処理を進めます．  
1. MP4ファイルをMP3ファイルへ変換する
2. txtファイルで記述した時間指定をもとに，変換したMP3ファイルから切り出して出力する
</br>
上記の1.2.ごとでbatファイルを作成しているため，個別に処理を行うことも可能です．  
また，batファイルについての理解があれば，編集することで出力ファイルの形式も変更できます．  
</br>
</br>
(作成者はMP3ファイルでの出力が目的だったため，MP3での出力としています．</br>
出力ファイルの形式をMP4にすれば，1本の長時間の動画から複数の短い動画を切り出すなどができます．)

## 動作環境
作成者の環境は以下になります．  
* Windows10
</br></br>
また，batファイル中ではffmpegのコマンドを入れているため，あらかじめダウンロード/環境設定を済ませてください．  
DL先：https://ffmpeg.org/  
設定方法：「ffmpeg 設定方法」などで検索(個人ブログが多いためここでは取り上げません．勝手に紹介してよいものかわからず...)  

#### ffmpegとは
ffmpegは，動画や音声ファイルをコマンドライン形式で編集することがでできるソフトウェアです．  
上記のリンクはffmpegの公式ページです．

## ツール構成
本ツールの構成は以下のようになっています．

capMOV2MP3</br>
&nbsp;&nbsp;&nbsp;--Root.bat</br>
&nbsp;&nbsp;&nbsp;--subroot_MP4toMP3.bat</br>
&nbsp;&nbsp;&nbsp;--subroot_splitMP3.bat</br>
&nbsp;&nbsp;&nbsp;--list.txt</br>

#### **Root.bat**
subroot_MP4toMP3.batとsubroot_splitMP3.batをコールするbatファイル．

#### **subroot_MP4toMP3.bat**
MP4からMP3に変換するファイル．  
ツールのフォルダ内にあるMP4ファイルを検出して，それを対象に処理を進める．  
MP4ファイルが複数ある場合は最初に検出したファイル(ファイル名の降順？)を対象とする．  
</br>
出力されるMP3ファイルの名前はout.mp3となる．

#### **subroot_splitMP3.bat**
out.mp3を対象として指定時間でmp3ファイルを出力していくbatファイル．  
切り出す時間と出力ファイル名の指定はlist.txtで記述する．

#### **list.txt**
out.mp3から切り出す時間と出力ファイル名を指定するtxt形式のファイル．  
batファイルではtxtファイルの1行で1つのMP3ファイルを出力する.  
txtファイルの1行単位の形式はスペース区切りで以下のようになっている．  
</br>
"_START_"&nbsp;&nbsp;"_END_"&nbsp;&nbsp;_FILENAME_
</br>

* **_START_**：切り出し開始の時間．形式はhh:mm:ssで記述する．  
* **_END_**：切り出し終了の時間．形式はhh:mm:ssで記述する．  
* **_FILENAME_**：出力ファイル名．拡張子まで記述する．またファイル名にスペースなどの区切り文字を入れないこと．任意の拡張子に変更可能．

## 使い方

**1. ツールフォルダ直下にソースとなるMP4ファイルを格納する．**  
ファイル名はスペースなどの区切り文字を入れないようにする．  
</br>
**2. list.txtを編集．**  
list.txtの説明に記載の記述形式を守って記述する．  
</br>
**3. コマンドプロンプトを起動してツールフォルダまで移動する**  
ツールのフォルダをダブルクリックしてエクスプローラを開いて，パス入力欄に「cmd」でEnterすると楽．  
</br>
**4. Root.batを実行**  
コンソールに「Root.bat」と入力して実行．処理が終了するまで待つ．
処理が終わるとツールのフォルダ内にrstフォルダが作成されて，その中に切り出したファイルが格納されている．

## 注意点
細かい例外処理などはいれていないので，何らかのエラーが出た場合は自分で対処してください．  
主にffmpegから出るエラーだと思います．

## ライセンス
MIT．
本ツールを使用・利用することで発生したトラブルには，作成者は一切責任を負いません．


